<!DOCTYPE html> 
<html>
<head>
    <script src="cordova.js"></script>
    <link rel="stylesheet" href="css/onsenui.css">
    <link rel="stylesheet" href="css/onsen-css-components.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <script src="https://cdn.rawgit.com/GluuFederation/openid-implicit-client/master/openidconnect.js"></script>
</head>
<body>
    <p>Logged in</p>
    <div id='tokenClaims'></div>
    <div id='userInfoClaims'></div>

    <script>
        try{
            OIDC.restoreInfo();
            var id_token = OIDC.getValidIdToken();
            var access_token = OIDC.getAccessToken();
            var tokenClaims = JSON.parse(OIDC.getIdTokenParts(id_token)[1]);
            var userInfoClaims = JSON.parse(OIDC.getUserInfo(access_token));
            var tokenClaimsHTMLString = JSONObjToHTMLTable(tokenClaims);
            var userInfoClaimsHTMLString = JSONObjToHTMLTable(userInfoClaims);
            OIDC.debug(true, id_token);
            $(document).ready(function(){
                $('#tokenClaims').html(tokenClaimsHTMLString);
                $('#userInfoClaims').html(userInfoClaimsHTMLString);
            });
        } catch(err) {
            window.location = 'http://localhost:8000/index.html'
        }
    </script>
</body>
</html>