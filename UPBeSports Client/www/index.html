<!DOCTYPE html> 
<html>
<head>
    <script src="cordova.js"></script>
    <link rel="stylesheet" href="css/onsenui.css">
    <link rel="stylesheet" href="css/onsen-css-components.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <script src="https://cdn.rawgit.com/GluuFederation/openid-implicit-client/master/openidconnect.js"></script>
</head>
<body>
    <ons-page>
        <div style="text-align: center; margin-top: 30px;">
            <img src="res/logo.png" style="max-width: 250px; width: 100%;">
            <p style="margin-top: 30px;">
            <ons-button onclick="OIDC.login( {scope : 'openid email profile', response_type : 'token id_token'} );">Sign in</ons-button>
            <ons-button onclick="window.open('https://auth.upbesports.com/identity/register');">Register</ons-button>
            </p>
        </div>
    </ons-page>

    <script>
        var clientInfo = {
            client_id : '@!32F2.B458.9918.7996!0001!D0B3.8E33!0008!4A76.F928.A912.3956',
            redirect_uri : 'http://localhost:8000/home.html'
        };
        var providerInfo = OIDC.discover('https://auth.upbesports.com');

        OIDC.setClientInfo(clientInfo);
        OIDC.setProviderInfo(providerInfo);
        OIDC.storeInfo(providerInfo, clientInfo);
        sessionStorage.removeItem('state');
        sessionStorage.removeItem('nonce');

        var login = function() {
            OIDC.login({
                scope : 'openid profile',
                response_type : 'token id_token',
                max_age : 60,
                claims : {
                    id_token : ['email', 'phone_number'],
                    userinfo : ['given_name', 'family_name']
                }
            });
        };

        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }
    </script>
</body>
</html>